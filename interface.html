<!DOCTYPE <!DOCTYPE html>
<html>
<head>
	<title>Bridge: Programming, Simplified</title>
	<h2 id="main">Welcome to the Bridge Programming Langauge!</h2>
	<link rel="stylesheet" type="text/css" href="style.css">

	<script src="javascript/underscore.js"></script>
    <script src="javascript/uxadt.js"></script>
    <script src="javascript/imparse.js"></script>
    <script src="javascript/default.js"></script>
    <script src="javascript/interpret.js"></script>

    <script type="text/javascript">

var process = function () {
    var str = document.getElementById('bnf_text').value;
    var ux = I.bnfToUxadt(str);
    grammar = ux;
    procParse();
};

var procParse = function () {
    var str = document.getElementById('user_input').value;
    var tree = I.parser(grammar, str);

    //alert(typeof tree);
    if (typeof tree == "string") {
        document.getElementById('abs_syn').innerHTML = tree;
    } else {
        document.getElementById('abs_syn').innerHTML = JSON.stringify(tree, null, 2);
    }

    var outp = interpret({},tree);
    document.getElementById('output').innerHTML = outp;

};

var eval = function() {
    //var str = document.getElementById('parser_input').value;
    //var tree = I.parser(grammar, str)
    var outp = interpret({},tree);
    document.getElementById('interpreter_output').innerHTML = outp;

};


    </script>



</head>
<body>
	<table>
		<tr>
			<td>
				<h3 align="center">Bridge Language Syntax</h3>
				<textarea id="bnf_text">

Program ::=
    Print | print `Expression
    Assign | $([a-z][A-Za-z]*)$ = `Expression ; `Program
    If | if `Formula `Program ; `Program
    For | for `Term times `Program ; `Program
    

Expression ::= 
    Formula | `Formula
    Term | `Term

Formula ::=
    And | `Formula and `Formula
    Or | `Formula or `Formula
    Not | not `Formula
    Equal | `Term == `Term
    GT | `Term gt `Term
    LT | `Term lt `Term
    GTE | `Term gte `Term
    LTE | `Term lte `Term
    True | true
    False | false

Term ::=
    Plus | `Term "+" `Term
    Minus | `Factor - `Factor
    Factor | `Factor

Factor ::=
    Mult | `Factor "*" `Factor
    Div | `Factor "/" `Factor
    Power | `Factor "^" `Factor
    Mod | `Factor "%" `Factor
    Number | $(0|[1-9][0-9]*)$
    Variable | $([a-z][A-Za-z]*)$
				</textarea>
			</td>

			<td>
				<h3 align="center">Examples</h3>
				<textarea id="examples">
# Anything behind the double pound sign is a comment, don't input it!

print 1+1					## outputs 2
one = 1; print one + one + 1			## outputs 3
print true or false 				## outputs true
print true and false 				## outputs false, why?
foo = 1; bar = foo + 1; print foo + bar		## outputs 3
if 4*4 gt 2^3 print 4*4-1; print 2^3+1		## outputs 15,9
for 5 times print 1+2; vidhu = 10; print vidhu	## outputs 3,3,3,3,3,10

				</textarea>
			</td>
		</tr>
	</table>

	<hr>

	<div align="center">
		<h3>Write your code here!</h3>
		<textarea id="user_input" placeholder="Type code here..."></textarea>
		<br>
		<button onclick="process();">Make the Magic Happen</button>

	<h4>Output</h4>
	<textarea id="output"></textarea>

	<hr>
	<br>

	<p>If you're interested, you can see the abstract syntax tree below, which is the way the code you typed is represented before it is evaluated into output.</p>

	<h4>Abstract Syntax</h4>
	<textarea id="abs_syn" placeholder="Abstract Syntax Trees will appear here..."></textarea>

</body>
</html>